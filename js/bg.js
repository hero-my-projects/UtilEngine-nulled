"use strict";(()=>{var Nr=Object.create;var tr=Object.defineProperty;var Wr=Object.getOwnPropertyDescriptor;var $r=Object.getOwnPropertyNames;var Or=Object.getPrototypeOf,zr=Object.prototype.hasOwnProperty;var I=(t,r)=>()=>(t&&(r=t(t=0)),r);var K=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports);var Gr=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of $r(r))!zr.call(t,i)&&i!==e&&tr(t,i,{get:()=>r[i],enumerable:!(n=Wr(r,i))||n.enumerable});return t};var Vr=(t,r,e)=>(e=t!=null?Nr(Or(t)):{},Gr(r||!t||!t.__esModule?tr(e,"default",{value:t,enumerable:!0}):e,t));var E,f=I(()=>{E=globalThis});var l=I(()=>{});var h=I(()=>{});function Kr(){throw new Error("setTimeout has not been defined")}function Hr(){throw new Error("clearTimeout has not been defined")}function qr(t,r){this.fun=t,this.array=r}var Jr,Zr,L,xt,gt,nr=I(()=>{f();l();h();w();p();Jr=Kr,Zr=Hr;typeof E.setTimeout=="function"&&(Jr=setTimeout);typeof E.clearTimeout=="function"&&(Zr=clearTimeout);qr.prototype.run=function(){this.fun.apply(null,this.array)};L=E.performance||{},xt=L.now||L.mozNow||L.msNow||L.oNow||L.webkitNow||function(){return new Date().getTime()},gt=new Date});var p=I(()=>{nr()});function ir(){H=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,e=t.length;r<e;++r)S[r]=t[r],B[t.charCodeAt(r)]=r;B["-".charCodeAt(0)]=62,B["_".charCodeAt(0)]=63}function or(t){H||ir();var r,e,n,i,o,a,u=t.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=t[u-2]==="="?2:t[u-1]==="="?1:0,a=new Xr(u*3/4-o),n=o>0?u-4:u;var c=0;for(r=0,e=0;r<n;r+=4,e+=3)i=B[t.charCodeAt(r)]<<18|B[t.charCodeAt(r+1)]<<12|B[t.charCodeAt(r+2)]<<6|B[t.charCodeAt(r+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=i&255;return o===2?(i=B[t.charCodeAt(r)]<<2|B[t.charCodeAt(r+1)]>>4,a[c++]=i&255):o===1&&(i=B[t.charCodeAt(r)]<<10|B[t.charCodeAt(r+1)]<<4|B[t.charCodeAt(r+2)]>>2,a[c++]=i>>8&255,a[c++]=i&255),a}function Qr(t){return S[t>>18&63]+S[t>>12&63]+S[t>>6&63]+S[t&63]}function jr(t,r,e){for(var n,i=[],o=r;o<e;o+=3)n=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(Qr(n));return i.join("")}function J(t){H||ir();for(var r,e=t.length,n=e%3,i="",o=[],a=16383,u=0,c=e-n;u<c;u+=a)o.push(jr(t,u,u+a>c?c:u+a));return n===1?(r=t[e-1],i+=S[r>>2],i+=S[r<<4&63],i+="=="):n===2&&(r=(t[e-2]<<8)+t[e-1],i+=S[r>>10],i+=S[r>>4&63],i+=S[r<<2&63],i+="="),o.push(i),o.join("")}var S,B,Xr,H,ar=I(()=>{f();l();h();w();p();S=[],B=[],Xr=typeof Uint8Array<"u"?Uint8Array:Array,H=!1});function Y(t,r,e,n,i){var o,a,u=i*8-n-1,c=(1<<u)-1,x=c>>1,g=-7,m=e?i-1:0,U=e?-1:1,_=t[r+m];for(m+=U,o=_&(1<<-g)-1,_>>=-g,g+=u;g>0;o=o*256+t[r+m],m+=U,g-=8);for(a=o&(1<<-g)-1,o>>=-g,g+=n;g>0;a=a*256+t[r+m],m+=U,g-=8);if(o===0)o=1-x;else{if(o===c)return a?NaN:(_?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-x}return(_?-1:1)*a*Math.pow(2,o-n)}function Z(t,r,e,n,i,o){var a,u,c,x=o*8-i-1,g=(1<<x)-1,m=g>>1,U=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:o-1,b=n?1:-1,Yr=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,a=g):(a=Math.floor(Math.log(r)/Math.LN2),r*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+m>=1?r+=U/c:r+=U*Math.pow(2,1-m),r*c>=2&&(a++,c/=2),a+m>=g?(u=0,a=g):a+m>=1?(u=(r*c-1)*Math.pow(2,i),a=a+m):(u=r*Math.pow(2,m-1)*Math.pow(2,i),a=0));i>=8;t[e+_]=u&255,_+=b,u/=256,i-=8);for(a=a<<i|u,x+=i;x>0;t[e+_]=a&255,_+=b,a/=256,x-=8);t[e+_-b]|=Yr*128}var sr=I(()=>{f();l();h();w();p()});var te,q,ur=I(()=>{f();l();h();w();p();te={}.toString,q=Array.isArray||function(t){return te.call(t)=="[object Array]"}});function W(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function P(t,r){if(W()<r)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r),t.__proto__=s.prototype):(t===null&&(t=new s(r)),t.length=r),t}function s(t,r,e){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(t,r,e);if(typeof t=="number"){if(typeof r=="string")throw new Error("If encoding is specified then the first argument must be a string");return Q(this,t)}return lr(this,t,r,e)}function lr(t,r,e,n){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer?ae(t,r,e,n):typeof r=="string"?oe(t,r,e):se(t,r)}function hr(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function ie(t,r,e,n){return hr(r),r<=0?P(t,r):e!==void 0?typeof n=="string"?P(t,r).fill(e,n):P(t,r).fill(e):P(t,r)}function Q(t,r){if(hr(r),t=P(t,r<0?0:j(r)|0),!s.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function oe(t,r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!s.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=pr(r,e)|0;t=P(t,n);var i=t.write(r,e);return i!==n&&(t=t.slice(0,i)),t}function X(t,r){var e=r.length<0?0:j(r.length)|0;t=P(t,e);for(var n=0;n<e;n+=1)t[n]=r[n]&255;return t}function ae(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return e===void 0&&n===void 0?r=new Uint8Array(r):n===void 0?r=new Uint8Array(r,e):r=new Uint8Array(r,e,n),s.TYPED_ARRAY_SUPPORT?(t=r,t.__proto__=s.prototype):t=X(t,r),t}function se(t,r){if(k(r)){var e=j(r.length)|0;return t=P(t,e),t.length===0||r.copy(t,0,0,e),t}if(r){if(typeof ArrayBuffer<"u"&&r.buffer instanceof ArrayBuffer||"length"in r)return typeof r.length!="number"||_e(r.length)?P(t,0):X(t,r);if(r.type==="Buffer"&&q(r.data))return X(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function j(t){if(t>=W())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+W().toString(16)+" bytes");return t|0}function k(t){return!!(t!=null&&t._isBuffer)}function pr(t,r){if(k(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var e=t.length;if(e===0)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return Er(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function ue(t,r,e){var n=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,r>>>=0,e<=r))return"";for(t||(t="utf8");;)switch(t){case"hex":return de(this,r,e);case"utf8":case"utf-8":return xr(this,r,e);case"ascii":return xe(this,r,e);case"latin1":case"binary":return ge(this,r,e);case"base64":return we(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function D(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function wr(t,r,e,n,i){if(t.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0)if(i)e=0;else return-1;if(typeof r=="string"&&(r=s.from(r,n)),k(r))return r.length===0?-1:cr(t,r,e,n,i);if(typeof r=="number")return r=r&255,s.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):cr(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function cr(t,r,e,n,i){var o=1,a=t.length,u=r.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||r.length<2)return-1;o=2,a/=2,u/=2,e/=2}function c(_,b){return o===1?_[b]:_.readUInt16BE(b*o)}var x;if(i){var g=-1;for(x=e;x<a;x++)if(c(t,x)===c(r,g===-1?0:x-g)){if(g===-1&&(g=x),x-g+1===u)return g*o}else g!==-1&&(x-=x-g),g=-1}else for(e+u>a&&(e=a-u),x=e;x>=0;x--){for(var m=!0,U=0;U<u;U++)if(c(t,x+U)!==c(r,U)){m=!1;break}if(m)return x}return-1}function ce(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n),n>i&&(n=i)):n=i;var o=r.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var u=parseInt(r.substr(a*2,2),16);if(isNaN(u))return a;t[e+a]=u}return a}function fe(t,r,e,n){return G($(r,t.length-e),t,e,n)}function mr(t,r,e,n){return G(Fe(r),t,e,n)}function le(t,r,e,n){return mr(t,r,e,n)}function he(t,r,e,n){return G(Er(r),t,e,n)}function pe(t,r,e,n){return G(Re(r,t.length-e),t,e,n)}function we(t,r,e){return r===0&&e===t.length?J(t):J(t.slice(r,e))}function xr(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o=t[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=e){var c,x,g,m;switch(u){case 1:o<128&&(a=o);break;case 2:c=t[i+1],(c&192)===128&&(m=(o&31)<<6|c&63,m>127&&(a=m));break;case 3:c=t[i+1],x=t[i+2],(c&192)===128&&(x&192)===128&&(m=(o&15)<<12|(c&63)<<6|x&63,m>2047&&(m<55296||m>57343)&&(a=m));break;case 4:c=t[i+1],x=t[i+2],g=t[i+3],(c&192)===128&&(x&192)===128&&(g&192)===128&&(m=(o&15)<<18|(c&63)<<12|(x&63)<<6|g&63,m>65535&&m<1114112&&(a=m))}}a===null?(a=65533,u=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),i+=u}return me(n)}function me(t){var r=t.length;if(r<=fr)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=fr));return e}function xe(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]&127);return n}function ge(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function de(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Ae(t[o]);return i}function ye(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}function F(t,r,e){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function R(t,r,e,n,i,o){if(!k(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function O(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>(n?i:1-i)*8}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>(n?i:3-i)*8&255}function gr(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function dr(t,r,e,n,i){return i||gr(t,r,e,4,34028234663852886e22,-34028234663852886e22),Z(t,r,e,n,23,4),e+4}function yr(t,r,e,n,i){return i||gr(t,r,e,8,17976931348623157e292,-17976931348623157e292),Z(t,r,e,n,52,8),e+8}function ve(t){if(t=Te(t).replace(Ee,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Te(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Ae(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){r=r||1/0;for(var e,n=t.length,i=null,o=[],a=0;a<n;++a){if(e=t.charCodeAt(a),e>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,e&63|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return o}function Fe(t){for(var r=[],e=0;e<t.length;++e)r.push(t.charCodeAt(e)&255);return r}function Re(t,r){for(var e,n,i,o=[],a=0;a<t.length&&!((r-=2)<0);++a)e=t.charCodeAt(a),n=e>>8,i=e%256,o.push(i),o.push(n);return o}function Er(t){return or(ve(t))}function G(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function _e(t){return t!==t}function Be(t){return t!=null&&(!!t._isBuffer||vr(t)||Ue(t))}function vr(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Ue(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&vr(t.slice(0,0))}var ne,$t,fr,Ee,Tr=I(()=>{f();l();h();w();p();ar();sr();ur();ne=50;s.TYPED_ARRAY_SUPPORT=E.TYPED_ARRAY_SUPPORT!==void 0?E.TYPED_ARRAY_SUPPORT:!0;$t=W();s.poolSize=8192;s._augment=function(t){return t.__proto__=s.prototype,t};s.from=function(t,r,e){return lr(null,t,r,e)};s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&s[Symbol.species]);s.alloc=function(t,r,e){return ie(null,t,r,e)};s.allocUnsafe=function(t){return Q(null,t)};s.allocUnsafeSlow=function(t){return Q(null,t)};s.isBuffer=Be;s.compare=function(r,e){if(!k(r)||!k(e))throw new TypeError("Arguments must be Buffers");if(r===e)return 0;for(var n=r.length,i=e.length,o=0,a=Math.min(n,i);o<a;++o)if(r[o]!==e[o]){n=r[o],i=e[o];break}return n<i?-1:i<n?1:0};s.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};s.concat=function(r,e){if(!q(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return s.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<r.length;++n)e+=r[n].length;var i=s.allocUnsafe(e),o=0;for(n=0;n<r.length;++n){var a=r[n];if(!k(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i};s.byteLength=pr;s.prototype._isBuffer=!0;s.prototype.swap16=function(){var r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<r;e+=2)D(this,e,e+1);return this};s.prototype.swap32=function(){var r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<r;e+=4)D(this,e,e+3),D(this,e+1,e+2);return this};s.prototype.swap64=function(){var r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<r;e+=8)D(this,e,e+7),D(this,e+1,e+6),D(this,e+2,e+5),D(this,e+3,e+4);return this};s.prototype.toString=function(){var r=this.length|0;return r===0?"":arguments.length===0?xr(this,0,r):ue.apply(this,arguments)};s.prototype.equals=function(r){if(!k(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:s.compare(this,r)===0};s.prototype.inspect=function(){var r="",e=ne;return this.length>0&&(r=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(r+=" ... ")),"<Buffer "+r+">"};s.prototype.compare=function(r,e,n,i,o){if(!k(r))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=r?r.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),e<0||n>r.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&e>=n)return 0;if(i>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,o>>>=0,this===r)return 0;for(var a=o-i,u=n-e,c=Math.min(a,u),x=this.slice(i,o),g=r.slice(e,n),m=0;m<c;++m)if(x[m]!==g[m]){a=x[m],u=g[m];break}return a<u?-1:u<a?1:0};s.prototype.includes=function(r,e,n){return this.indexOf(r,e,n)!==-1};s.prototype.indexOf=function(r,e,n){return wr(this,r,e,n,!0)};s.prototype.lastIndexOf=function(r,e,n){return wr(this,r,e,n,!1)};s.prototype.write=function(r,e,n,i){if(e===void 0)i="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")i=e,n=this.length,e=0;else if(isFinite(e))e=e|0,isFinite(n)?(n=n|0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-e;if((n===void 0||n>o)&&(n=o),r.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return ce(this,r,e,n);case"utf8":case"utf-8":return fe(this,r,e,n);case"ascii":return mr(this,r,e,n);case"latin1":case"binary":return le(this,r,e,n);case"base64":return he(this,r,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,r,e,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}};s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};fr=4096;s.prototype.slice=function(r,e){var n=this.length;r=~~r,e=e===void 0?n:~~e,r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<r&&(e=r);var i;if(s.TYPED_ARRAY_SUPPORT)i=this.subarray(r,e),i.__proto__=s.prototype;else{var o=e-r;i=new s(o,void 0);for(var a=0;a<o;++a)i[a]=this[a+r]}return i};s.prototype.readUIntLE=function(r,e,n){r=r|0,e=e|0,n||F(r,e,this.length);for(var i=this[r],o=1,a=0;++a<e&&(o*=256);)i+=this[r+a]*o;return i};s.prototype.readUIntBE=function(r,e,n){r=r|0,e=e|0,n||F(r,e,this.length);for(var i=this[r+--e],o=1;e>0&&(o*=256);)i+=this[r+--e]*o;return i};s.prototype.readUInt8=function(r,e){return e||F(r,1,this.length),this[r]};s.prototype.readUInt16LE=function(r,e){return e||F(r,2,this.length),this[r]|this[r+1]<<8};s.prototype.readUInt16BE=function(r,e){return e||F(r,2,this.length),this[r]<<8|this[r+1]};s.prototype.readUInt32LE=function(r,e){return e||F(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216};s.prototype.readUInt32BE=function(r,e){return e||F(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])};s.prototype.readIntLE=function(r,e,n){r=r|0,e=e|0,n||F(r,e,this.length);for(var i=this[r],o=1,a=0;++a<e&&(o*=256);)i+=this[r+a]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*e)),i};s.prototype.readIntBE=function(r,e,n){r=r|0,e=e|0,n||F(r,e,this.length);for(var i=e,o=1,a=this[r+--i];i>0&&(o*=256);)a+=this[r+--i]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*e)),a};s.prototype.readInt8=function(r,e){return e||F(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]};s.prototype.readInt16LE=function(r,e){e||F(r,2,this.length);var n=this[r]|this[r+1]<<8;return n&32768?n|4294901760:n};s.prototype.readInt16BE=function(r,e){e||F(r,2,this.length);var n=this[r+1]|this[r]<<8;return n&32768?n|4294901760:n};s.prototype.readInt32LE=function(r,e){return e||F(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24};s.prototype.readInt32BE=function(r,e){return e||F(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]};s.prototype.readFloatLE=function(r,e){return e||F(r,4,this.length),Y(this,r,!0,23,4)};s.prototype.readFloatBE=function(r,e){return e||F(r,4,this.length),Y(this,r,!1,23,4)};s.prototype.readDoubleLE=function(r,e){return e||F(r,8,this.length),Y(this,r,!0,52,8)};s.prototype.readDoubleBE=function(r,e){return e||F(r,8,this.length),Y(this,r,!1,52,8)};s.prototype.writeUIntLE=function(r,e,n,i){if(r=+r,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;R(this,r,e,n,o,0)}var a=1,u=0;for(this[e]=r&255;++u<n&&(a*=256);)this[e+u]=r/a&255;return e+n};s.prototype.writeUIntBE=function(r,e,n,i){if(r=+r,e=e|0,n=n|0,!i){var o=Math.pow(2,8*n)-1;R(this,r,e,n,o,0)}var a=n-1,u=1;for(this[e+a]=r&255;--a>=0&&(u*=256);)this[e+a]=r/u&255;return e+n};s.prototype.writeUInt8=function(r,e,n){return r=+r,e=e|0,n||R(this,r,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),this[e]=r&255,e+1};s.prototype.writeUInt16LE=function(r,e,n){return r=+r,e=e|0,n||R(this,r,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=r&255,this[e+1]=r>>>8):O(this,r,e,!0),e+2};s.prototype.writeUInt16BE=function(r,e,n){return r=+r,e=e|0,n||R(this,r,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=r>>>8,this[e+1]=r&255):O(this,r,e,!1),e+2};s.prototype.writeUInt32LE=function(r,e,n){return r=+r,e=e|0,n||R(this,r,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=r>>>24,this[e+2]=r>>>16,this[e+1]=r>>>8,this[e]=r&255):z(this,r,e,!0),e+4};s.prototype.writeUInt32BE=function(r,e,n){return r=+r,e=e|0,n||R(this,r,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=r&255):z(this,r,e,!1),e+4};s.prototype.writeIntLE=function(r,e,n,i){if(r=+r,e=e|0,!i){var o=Math.pow(2,8*n-1);R(this,r,e,n,o-1,-o)}var a=0,u=1,c=0;for(this[e]=r&255;++a<n&&(u*=256);)r<0&&c===0&&this[e+a-1]!==0&&(c=1),this[e+a]=(r/u>>0)-c&255;return e+n};s.prototype.writeIntBE=function(r,e,n,i){if(r=+r,e=e|0,!i){var o=Math.pow(2,8*n-1);R(this,r,e,n,o-1,-o)}var a=n-1,u=1,c=0;for(this[e+a]=r&255;--a>=0&&(u*=256);)r<0&&c===0&&this[e+a+1]!==0&&(c=1),this[e+a]=(r/u>>0)-c&255;return e+n};s.prototype.writeInt8=function(r,e,n){return r=+r,e=e|0,n||R(this,r,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),r<0&&(r=255+r+1),this[e]=r&255,e+1};s.prototype.writeInt16LE=function(r,e,n){return r=+r,e=e|0,n||R(this,r,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=r&255,this[e+1]=r>>>8):O(this,r,e,!0),e+2};s.prototype.writeInt16BE=function(r,e,n){return r=+r,e=e|0,n||R(this,r,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=r>>>8,this[e+1]=r&255):O(this,r,e,!1),e+2};s.prototype.writeInt32LE=function(r,e,n){return r=+r,e=e|0,n||R(this,r,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=r&255,this[e+1]=r>>>8,this[e+2]=r>>>16,this[e+3]=r>>>24):z(this,r,e,!0),e+4};s.prototype.writeInt32BE=function(r,e,n){return r=+r,e=e|0,n||R(this,r,e,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),s.TYPED_ARRAY_SUPPORT?(this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=r&255):z(this,r,e,!1),e+4};s.prototype.writeFloatLE=function(r,e,n){return dr(this,r,e,!0,n)};s.prototype.writeFloatBE=function(r,e,n){return dr(this,r,e,!1,n)};s.prototype.writeDoubleLE=function(r,e,n){return yr(this,r,e,!0,n)};s.prototype.writeDoubleBE=function(r,e,n){return yr(this,r,e,!1,n)};s.prototype.copy=function(r,e,n,i){if(n||(n=0),!i&&i!==0&&(i=this.length),e>=r.length&&(e=r.length),e||(e=0),i>0&&i<n&&(i=n),i===n||r.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),r.length-e<i-n&&(i=r.length-e+n);var o=i-n,a;if(this===r&&n<e&&e<i)for(a=o-1;a>=0;--a)r[a+e]=this[a+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)r[a+e]=this[a+n];else Uint8Array.prototype.set.call(r,this.subarray(n,n+o),e);return o};s.prototype.fill=function(r,e,n,i){if(typeof r=="string"){if(typeof e=="string"?(i=e,e=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),r.length===1){var o=r.charCodeAt(0);o<256&&(r=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!s.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof r=="number"&&(r=r&255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,r||(r=0);var a;if(typeof r=="number")for(a=e;a<n;++a)this[a]=r;else{var u=k(r)?r:$(new s(r,i).toString()),c=u.length;for(a=0;a<n-e;++a)this[a+e]=u[a%c]}return this};Ee=/[^+\/0-9A-Za-z-_]/g});var w=I(()=>{Tr()});var Ir=K((gi,Ur)=>{f();l();h();w();p();var tt=(t,r={})=>{let e=r.char||" ",n=r.count||2,i=0,o=[];return t.reverse().reduce((a,u)=>{o.length&&i&&o[i]&&o[i]===u.substring(1,o[i].length+1)&&(o.splice(i,1),i--);let x=[`${e.repeat(i?i*n:0)}${u}`,...a];return u.substring(0,2)==="</"&&(i++,o[i]=u.substring(2,u.length-1)),x},[]).join(`
`)};Ur.exports=tt});var Pr=K((Ai,kr)=>{f();l();h();w();p();var Sr=t=>t.trim().replace(/(^(\s|\t)+|(( |\t)+)$)/gm,""),nt=t=>{let r=Sr(t).split(`
`),e=[],n="";for(let i=0;i<r.length;i+=1){let o=r[i];if(o.endsWith("/>")){e.push(`${n}${o.slice(0,-2)} />`),n="";continue}if(o.endsWith(">")){e.push(`${n}${o.startsWith(">")||o.startsWith("<")?"":" "}${o}`),n="";continue}n+=n.length?` ${o}`:o}return e};kr.exports={mergeAttributesWithElements:nt,removeEmptyLines:Sr}});var Cr=K((Ii,Mr)=>{f();l();h();w();p();var it=Ir(),{mergeAttributesWithElements:ot}=Pr(),at=(t,r={})=>{let e=ot(t);return it(e,r)};Mr.exports=at});f();l();h();w();p();f();l();h();w();p();f();l();h();w();p();function Ie(t){return chrome.runtime.getURL(t)}function Se(t,r){chrome.tabs.sendMessage(t,r)}function ke(t){chrome.runtime.sendMessage(t)}function Pe(t,r={}){chrome.tabs.create({url:t,...r})}async function Me(){try{return await chrome.tabs.captureVisibleTab(null,{format:"png"})}catch(t){throw t}}var Ce={local:{store:async t=>{try{await chrome.storage.local.set(t)}catch(r){throw console.log(r),r}},get:async t=>{try{let r=await chrome.storage.local.get([t]);return r[t]?r[t]:null}catch(r){throw console.log(r),r}},remove:async t=>{try{await chrome.storage.local.remove([t])}catch(r){throw console.log(r),r}},clear:async()=>{try{await chrome.storage.local.clear()}catch(t){throw console.log(t),t}}}},d={getURL:Ie,sendMessage:ke,sendMessageToTab:Se,openTab:Pe,captureVisibleArea:Me,storage:Ce};function De(t,r={},e){r.action=t,e?d.sendMessageToTab(e,r):d.sendMessage(r)}function be(t){chrome.runtime.onMessage.addListener((r,e,n)=>(n({}),t(r,e),!0))}var y={send:De,listen:be};f();l();h();w();p();f();l();h();w();p();f();l();h();w();p();var Le=[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor],Ye=[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Kindle",value:"Silk",version:"Silk"},{name:"Android",value:"Android",version:"Android"},{name:"PlayBook",value:"PlayBook",version:"OS"},{name:"BlackBerry",value:"BlackBerry",version:"/"},{name:"Macintosh",value:"Mac",version:"OS X"},{name:"Linux",value:"Linux",version:"rv"},{name:"Palm",value:"Palm",version:"PalmOS"}],Ne=[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"BlackBerry",value:"CLDC",version:"CLDC"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}];function Ar(t,r){let e=0,n=0,i,o,a,u,c;for(e=0;e<r.length;e+=1)if(i=new RegExp(r[e].value,"i"),a=i.test(t),a){if(o=new RegExp(r[e].version+"[- /:;]([\\d._]+)","i"),u=t.match(o),c="",u&&u[1]&&(u=u[1]),u)for(u=u.split(/[._]+/),n=0;n<u.length;n+=1)n===0?c+=u[n]+".":c+=u[n];else c="0";return{name:r[e].name,version:parseFloat(c)}}return{name:"unknown",version:0}}var Fr=Le.join(" "),We=Ar(Fr,Ye),$e=Ar(Fr,Ne),N={os:We,browser:$e};f();l();h();w();p();function Rr(t){let r=[];for(let e in t){let n=encodeURIComponent(e),i=encodeURIComponent(t[e]);r.push(n+"="+i)}return r=r.join("&"),r}var rr="https://api.utilengine.com/plugin",Oe=`${rr}/login`,ze=`${rr}/checkup`,Ge=`${rr}/deactivate`;async function Ve(t,r,e){let n=Rr({email:t,key:r,device_name:e,os:N.os.name,os_version:N.os.version,browser:N.browser.name,browser_version:N.browser.version});try{return await(await fetch(Oe,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},body:n})).json()}catch(i){throw i}}async function Ke(t){try{let r=await fetch(ze,{method:"GET",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${t}`}});if(r.status===200)return await r.json();throw new Error("403")}catch(r){throw r}}async function He(t){try{return await(await fetch(Ge,{method:"POST",headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8",authorization:`Bearer ${t}`}})).json()}catch(r){throw r}}var V={login:Ve,checkup:Ke,deactivate:He};f();l();h();w();p();function _r(t){var r=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return r.test(t)}f();l();h();w();p();function Je(){let t={tools:{}};d.storage.local.store({settings:t})}async function Ze(){try{return await d.storage.local.get("settings")}catch(t){return console.log(t),{}}}async function qe(t){try{await d.storage.local.store({settings:t})}catch(r){console.log(r)}}var M={setup:Je,get:Ze,save:qe};async function Xe(t,r,e,n){if(_r(r)&&e&&n)try{let i=await V.login(r,e,n);if(i.status===":)"){M.setup();let o={token:i.result.token,device_name:n};d.storage.local.store({user:o}),y.send("user.loginSuccess",{...i},t)}else y.send("user.loginFailed",{error:i.error},t)}catch(i){console.log(i),y.send("user.loginFailed",{error:i.message},t)}else y.send("user.loginFailed",{error:"Wrong input!"},t)}async function Qe(){try{let t=await er();if(t){let r=await V.checkup(t);if(r.status===":)"){let e=await d.storage.local.get("user");return e.token=r.result.token,d.storage.local.store({user:e}),!0}else return d.storage.local.remove("user"),!1}else return!1}catch(t){return console.log(t),t.message==="403"&&d.storage.local.remove("user"),!1}}async function er(){try{let t=await d.storage.local.get("user");return t?t.token:!1}catch(t){return console.log(t),!1}}async function je(t){try{let r=await er(),e=await V.deactivate(r);await d.storage.local.clear(),y.send("user.deactivationSuccessful",{...e},t)}catch(r){console.log(r),y.send("user.deactivationFailed",{error:r.message},t)}}var C={checkup:Qe,getToken:er,login:Xe,deactivate:je};f();l();h();w();p();chrome.commands.onCommand.addListener(async t=>{try{let r=await C.getToken(),e=await M.get();if(r){let n=await chrome.tabs.query({active:!0,currentWindow:!0}),i=n[0].url,o=n[0].id,a=!0;if((i.startsWith("http")||i.startsWith("file"))&&(a=!1),t==="activate-ue")a?d.openTab(d.getURL("app.html")):y.send("tool.enable",{tool_id:""},o);else if(t.startsWith("enable")){let u=t.split("-")[1];if(e.tools[u]===!1)return;if(a){let c=`app.html?t=${u}`;d.openTab(d.getURL(c))}else y.send("tool.enable",{tool_id:u},o)}}}catch(r){console.log(r)}});f();l();h();w();p();var rt="https://playground.utilengine.com";async function et(t){try{let r=await d.captureVisibleArea();y.send("imageToText.setImage",{data_url:r},t);let e=btoa(JSON.stringify({tab_id:t})),n=`${rt}?p=${e}`;d.openTab(n,{active:!1})}catch(r){console.log(r)}}var Br={read:et};f();l();h();w();p();var Dr=Vr(Cr());function st(t,r){let e=(0,Dr.default)(t,{char:"	",count:1});y.send("htmlBeautifyMinify.setOutput",{output:e},r)}var br={beautify:st};f();l();h();w();p();async function Lr(t){let r=t.getReader(),e=0,n="",a=(await r.read().then(function x({done:g,value:m}){return g?n:(e+=m.length,n+=m,r.read().then(x))})).split(",").map(x=>parseInt(x)),u=String.fromCharCode(...a);return JSON.parse(u)}async function ut(t,r){let e={model:"gpt-3.5-turbo",messages:[{role:"user",content:"Hello"}],stream:!1};try{let i=(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(e)})).body,o=await Lr(i);if(o.error)y.send("chatGTP.verifyKey.response",{error:o.error.message},r);else{let a=await d.storage.local.get("chatgtp")||{};a.key=t,await d.storage.local.store({chatgtp:a}),y.send("chatGTP.verifyKey.response",{key:t},r)}}catch(n){y.send("chatGTP.verifyKey.response",{error:n},r)}}async function ct(t,r){let e={model:"gpt-3.5-turbo",messages:t.messages,stream:!1};try{let n=await d.storage.local.get("chatgtp")||{};if(!n.key)throw new Error("No API key found. Please verify your key.");let o=(await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.key}`},body:JSON.stringify(e)})).body,a=await Lr(o);a.chat_id=t.id,y.send("chatGTP.send.response",{response:a},r)}catch(n){y.send("chatGTP.send.response",{error:n},r)}}y.listen((t,r)=>{let e=r.tab?r.tab.id:null;switch(t.action){case"chatGTP.send":ct(t.chat,e);break;case"chatGTP.verifyKey":ut(t.key,e);break}});async function ft(t,r){switch(t.action){case"user.getToken":try{let e=await C.getToken(),n=await M.get();y.send("user.setToken",{is_user:!!e,settings:n},r)}catch(e){console.log(e)}break;case"user.login":C.login(r,t.email,t.key,t.device_name);break;case"user.deactivate":C.deactivate();break;case"settings.save":M.save(t.settings);break;case"imageToText.read":Br.read(r);break;case"htmlBeautifyMinify.beautify":br.beautify(t.code,r);break;case"tab.message":{let e=t.tab.id;t.action=t.tab.action,delete t.tab,t.sender={id:r},y.send(t.action,t,e)}break}}async function lt(t){switch(t.action){case"user.getToken":try{let r=await C.getToken(),e=await M.get();r?y.send("popup.initialize",{settings:e}):(d.openTab(d.getURL("auth.html")),y.send("popup.close",{}))}catch(r){console.log(r)}break;case"tool.enable":y.send("tool.enable",{tool_id:t.tool_id},t.tab_id),y.send("popup.close",{});break}}y.listen((t,r,e)=>{switch(t.action){case"window.open":t.href?d.openTab(t.href):d.openTab(d.getURL(t.url));break}r.tab?ft(t,r.tab.id):lt(t)});C.checkup();})();
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
